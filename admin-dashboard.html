<body>

<!-- Admin Login Modal -->
<div class="hidden-login" id="adminLogin">
  <div class="login-box">
    <h2>ğŸ”’ Admin Login</h2>
    <input type="text" id="adminPhone" placeholder="ğŸ“± Phone number" />
    <input type="password" id="adminPass" placeholder="ğŸ”‘ OTP or Password" />
    <button onclick="checkAdmin()">âœ”ï¸ Login</button>
  </div>
</div>

<!-- Header & Profile -->
<header>
  ğŸ“’ DalağŸš²na Admin Bookkeeping Dashboard
  <div id="adminProfile" style="margin-top: 0.5rem; font-size: 0.9rem; display:none;">
    <span id="profileName">ğŸ‘¤ Admin</span> | <span id="profilePhone">ğŸ“±</span>
    <button onclick="logoutAdmin()" style="margin-left: 10px; background:#fff; color:#a0527b; border:1px solid #a0527b; padding:3px 10px; border-radius:4px; font-size: 0.8rem;">Logout</button>
  </div>
</header>

<!-- Embedded Google Form -->
<iframe id="adminFrame" src="" loading="lazy"></iframe>

<div class="note">
  â›” For authorized personnel only. Press <strong>Shift + A + D + M</strong> to access login.
</div>

<script>
  const ADMIN_PHONE = "09171234567";
  const ADMIN_PASS = "daladmin123";
  const SHEET_URL = "https://docs.google.com/forms/d/e/1FAIpQLScLVq8c5AAoW9zNzNZLwwVmUsYR-wKDwcrVPbvcEpA6OvuVGw/viewform?embedded=true";

  function checkAdmin() {
    const phone = document.getElementById("adminPhone").value.trim();
    const pass = document.getElementById("adminPass").value.trim();

    if (phone === ADMIN_PHONE && pass === ADMIN_PASS) {
      document.getElementById("adminLogin").style.display = "none";
      document.getElementById("adminFrame").src = SHEET_URL;

      // Show profile
      document.getElementById("profileName").textContent = "ğŸ‘¤ Admin";
      document.getElementById("profilePhone").textContent = phone;
      document.getElementById("adminProfile").style.display = "block";

      // Save to session
      sessionStorage.setItem("adminLoggedIn", "true");
    } else {
      alert("âŒ Incorrect credentials.");
    }
  }

  function logoutAdmin() {
    sessionStorage.removeItem("adminLoggedIn");
    document.getElementById("adminFrame").src = "";
    document.getElementById("adminProfile").style.display = "none";
    document.getElementById("adminLogin").style.display = "flex";
  }

  // Shortcut to trigger login modal
  let keys = [];
  document.addEventListener("keydown", (e) => {
    keys.push(e.key.toLowerCase());
    if (keys.slice(-4).join("") === "admn" && e.shiftKey) {
      document.getElementById("adminLogin").style.display = "flex";
      keys = [];
    }
  });

  // Check if still logged in
  window.onload = function () {
    if (sessionStorage.getItem("adminLoggedIn")) {
      document.getElementById("adminFrame").src = SHEET_URL;
      document.getElementById("adminProfile").style.display = "block";
    }
  }
</script>

</body>
