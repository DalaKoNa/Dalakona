<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Merchant 1 | DalaðŸš²na</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<header class="navbar">
  <a href="/" class="title">DalaðŸš²na.</a>
  <div class="cart">ðŸ›’ <span id="cart-count">0</span></div>
</header>

<section class="merchant-detail">
  <h1>Merchant 1 â€“ Grocery Shop</h1>
  <div class="product-list">
    <div class="product">
      <p>Bananas â€“ â‚±20</p>
      <button onclick="addToCart('Bananas', 20)">Add</button>
    </div>
    <div class="product">
      <p>Eggs (Dozen) â€“ â‚±60</p>
      <button onclick="addToCart('Eggs', 60)">Add</button>
    </div>
    <div class="product">
      <p>Milk â€“ â‚±50</p>
      <button onclick="addToCart('Milk', 50)">Add</button>
    </div>
  </div>
</section>
<!-- Other content above -->

<!-- Cart Display Section -->
<div>
  <h3>Cart (<span id="cart-count">0</span> items)</h3>
  <ul id="cart-list"></ul>
  <p>Total: â‚±<span id="cart-total">0</span></p>
  <a id="checkout-btn" href="#" target="_blank">Checkout</a>
</div>

<!-- Shopping Cart Script -->
<script>
  let cart = [];
  let merchantName = "";

  function initCart(merchant) {
    merchantName = merchant;
    updateCartDisplay();
  }

  function addToCart(item, price) {
    cart.push({ item, price });
    updateCartDisplay();
  }

  function updateCartDisplay() {
    const cartList = document.getElementById("cart-list");
    const cartTotal = document.getElementById("cart-total");
    const cartCount = document.getElementById("cart-count");
    const checkoutBtn = document.getElementById("checkout-btn");

    cartList.innerHTML = "";
    let total = 0;
    cart.forEach(entry => {
      const li = document.createElement("li");
      li.textContent = `${entry.item} â€“ â‚±${entry.price}`;
      cartList.appendChild(li);
      total += entry.price;
    });

    cartTotal.textContent = total;
    cartCount.textContent = cart.length;

    const itemsStr = cart.map(e => e.item).join(", ");
    const airtableURL = `https://airtable.com/appISjv70ZQ4pxBxv/pagNTESTFORM?prefill_Merchant=${encodeURIComponent(merchantName)}&prefill_Items=${encodeURIComponent(itemsStr)}&prefill_Total=${total}`;

    checkoutBtn.href = airtableURL;
  }

  // Example init for Merchant 1:
  initCart("Merchant 1");
</script>
</body>
</html>
