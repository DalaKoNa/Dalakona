<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DalağŸš²Na Handumanan Grocery Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="style.css" /> <!-- external styles (modular) -->
  <script defer src="/js/firebase-init.js"></script>
  <script defer src="/js/dala-cart.js"></script>
  <script defer src="/js/handumanan-products.js"></script>
</head>
<body>
  <header>
    <a href="select-store.html" class="back-btn"><i class="fas fa-arrow-left"></i></a>
    <h1>Handumanan Grocery Hub</h1>
    <div class="cart-btn" onclick="toggleCart()">
      <i class="fas fa-receipt"></i>
      <span class="cart-count" id="cart-count">0</span>
    </div>
  </header>

  <div class="search-bar">
    <input type="text" id="searchInput" oninput="filterProducts()" placeholder="Search groceries...">
  </div>

  <div class="grid" id="product-list"></div>

  <div class="cart-modal hidden" id="cart-modal">
    <div class="close-btn" onclick="toggleCart()">&times;</div>
    <div class="cart-summary" id="cart-summary"></div>
    <div class="form-section">
      <h3>Customer Info</h3>
      <input type="text" id="customer-name" placeholder="Full Name" required>
      <input type="tel" id="customer-phone" placeholder="Phone Number" required>
      <input type="email" id="customer-email" placeholder="Email Address" required>
      <input type="text" id="delivery-address" placeholder="ğŸ“ Paste Google Maps link or address" required>
      <button type="button" class="location-btn" onclick="getLocation()">ğŸ“ Use Current Location</button>
      <input type="text" id="delivery-notes" placeholder="ğŸ  House number, landmarks, etc. (Optional)">
      <input type="text" id="payment-ref" placeholder="ğŸ“„ Payment reference number (required for GCash/Bank)" style="margin-top: 0.5rem;" />

      <h3>Delivery Details</h3>
      <input type="date" id="delivery-date" disabled>
      <input type="time" id="delivery-time" disabled>
      <div id="delivery-note" style="font-size: 0.85rem; color: #444;">
        âœ… Allow 1 hour for merchant confirmation and delivery. Time is auto-set.
      </div>

      <h3>Payment</h3>
      <select id="payment-method">
        <option value="GCash">GCash</option>
        <option value="PayMaya">PayMaya</option>
        <option value="Bank">Bank Transfer</option>
        <option value="Cash">Cash on Delivery (COD)</option>
      </select>

      <div style="margin-top: 0.5rem;">
        <a id="payment-link" href="payment-instructions.html?method=GCash" target="_blank" style="color: #008060; text-decoration: underline;">
          View payment instructions
        </a>
      </div>

      <div style="margin-top: 1rem; font-size: 0.85rem; color: #444;">
        âœ… I agree to the
        <a href="terms.html" target="_blank" style="color: #008060; text-decoration: underline;">
          Terms & Conditions
        </a>. Orders are final and subject to store policies.
      </div>

      <button
        class="checkout-btn bg-gray-400 text-white px-4 py-2 rounded cursor-not-allowed"
        id="checkout-btn"
        onclick="submitOrder()"
        disabled
      >
        ğŸ›’ Checkout via WhatsApp
      </button>
    </div>
  </div>

  <script>
    window.onload = () => {
      renderProducts();
      autoFillDeliveryTime();
      validateForm();
    };
  </script>
</body>
</html>
