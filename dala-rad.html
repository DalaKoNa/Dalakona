<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dalaüö≤na RAD ‚Äì Salary Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #fdfbf9;
      color: #333;
      margin: 0;
      padding-bottom: 3rem;
    }
    header {
      background: #a0527b;
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 { font-size: 1.2rem; margin: 0; }
    .nav-btn { background: white; color: #a0527b; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .login-box input {
      width: 100%; padding: 0.75rem; margin-bottom: 1rem;
      border-radius: 6px; border: 1px solid #ccc;
    }
    .login-box button {
      background: #a0527b; color: white; border: none;
      padding: 0.75rem 1rem; border-radius: 6px; cursor: pointer;
    }
    .hidden { display: none; }
    .logout { text-align: right; font-size: 0.8rem; margin-bottom: 1rem; }
    .payslip {
      border: 1px solid #ddd; padding: 1.5rem;
      border-radius: 10px; background: #fefefe; margin-bottom: 1.5rem;
    }
    .payslip h2 { margin-top: 0; color: #a0527b; text-align: center; }
    .payslip .row { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
    .payslip .total { font-weight: bold; font-size: 1.1rem; text-align: center; margin-top: 1rem; }
    .calendar {
      display: grid; grid-template-columns: repeat(7, 1fr);
      gap: 8px; font-size: 0.85rem; margin-top: 1rem;
    }
    .calendar div {
      border: 1px solid #ccc; padding: 0.5rem;
      border-radius: 6px; text-align: center;
    }
    .present { background: #d4edda; }
    .absent { background: #f8d7da; }
    .controls button {
      margin-right: 8px; background: #eee; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer;
    }
    .controls { margin-bottom: 1rem; }
    .footer-btns button {
      background: #a0527b; color: white; border: none; padding: 0.6rem 1rem; border-radius: 6px;
      margin-right: 1rem; cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <h1>Dalaüö≤na RAD Payslip System</h1>
  <button class="nav-btn" onclick="logout()">Logout</button>
</header>

<div class="container">
  <div id="loginBox" class="login-box">
    <input type="text" id="loginName" placeholder="Enter Full Name" />
    <input type="password" id="loginOTP" placeholder="Enter OTP" />
    <button onclick="login()">Login</button>
  </div>

  <div id="dashboard" class="hidden">
    <div class="logout">Welcome, <span id="userRole"></span></div>

    <div class="controls">
      <label>Select Month:
        <select id="monthSelect" onchange="renderPayslip()">
          <option value="2025-06">June 2025</option>
          <option value="2025-07">July 2025</option>
        </select>
      </label>
    </div>

    <div class="payslip" id="payslipArea">
      <h2>Payslip for <span id="userName">Rider</span></h2>
      <div class="row"><span>üìÖ Period:</span><span id="payslipPeriod">June 2025</span></div>
      <div class="row"><span>‚úÖ Attendance:</span><span id="payslipAttendance">0 / 20 days</span></div>
      <div class="row"><span>üì¶ Deliveries:</span><span id="payslipDeliveries">0 deliveries</span></div>
      <div class="row"><span>üç± Allowance:</span><span id="payslipAllowance">‚Ç±0</span></div>
      <div class="row"><span>üí∏ Payout:</span><span id="payslipPayout">‚Ç±0</span></div>
      <div class="total">üí∞ Total: ‚Ç±<span id="payslipTotal">0</span></div>
    </div>

    <div class="calendar" id="calendar"></div>

    <div class="footer-btns">
      <button onclick="sendWhatsApp()">üì≤ Send via WhatsApp</button>
      <button onclick="sendEmail()">üìß Send via Email</button>
      <button onclick="window.print()">üñ®Ô∏è Print Payslip</button>
    </div>
  </div>
</div>

<script>
  const STAFF = {
    "lynn": "lynn2024",
    "mark": "mark2024",
    "jane": "jane2024",
    "karl": "karl2024",
    "radadmin": "radAdmin2024"
  };

  const DATA = {
    "lynn": { deliveries: 120, attendance: 18, allowance: 1000, payout: 2000, email: "lynn@email.com", phone: "63XXXXXX" },
    "mark": { deliveries: 98, attendance: 17, allowance: 950, payout: 1800, email: "mark@email.com", phone: "63XXXXXX" },
    "jane": { deliveries: 105, attendance: 19, allowance: 1050, payout: 1900, email: "jane@email.com", phone: "63XXXXXX" },
    "karl": { deliveries: 90, attendance: 16, allowance: 900, payout: 1700, email: "karl@email.com", phone: "63XXXXXX" },
  };

  let currentUser = null;

  function login() {
    const name = document.getElementById("loginName").value.toLowerCase().trim();
    const otp = document.getElementById("loginOTP").value.trim();
    if (STAFF[name] && STAFF[name] === otp) {
      currentUser = name;
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("dashboard").classList.remove("hidden");
      document.getElementById("userName").innerText = name.toUpperCase();
      document.getElementById("userRole").innerText = name.toUpperCase();
      renderPayslip();
    } else {
      alert("Invalid login");
    }
  }

  function logout() {
    location.reload();
  }

  function renderPayslip() {
    const month = document.getElementById("monthSelect").value;
    const data = DATA[currentUser];
    document.getElementById("payslipPeriod").innerText = month;
    document.getElementById("payslipAttendance").innerText = `${data.attendance} / 20 days`;
    document.getElementById("payslipDeliveries").innerText = `${data.deliveries} deliveries`;
    document.getElementById("payslipAllowance").innerText = `‚Ç±${data.allowance}`;
    document.getElementById("payslipPayout").innerText = `‚Ç±${data.payout}`;
    document.getElementById("payslipTotal").innerText = data.allowance + data.payout;

    const calendar = document.getElementById("calendar");
    calendar.innerHTML = "";
    for (let i = 1; i <= 20; i++) {
      const div = document.createElement("div");
      div.className = i <= data.attendance ? 'present' : 'absent';
      div.innerText = `Day ${i}`;
      calendar.appendChild(div);
    }
  }

  function sendWhatsApp() {
    const data = DATA[currentUser];
    const message = `RAD Payslip\nName: ${currentUser}\nAttendance: ${data.attendance}/20\nDeliveries: ${data.deliveries}\nAllowance: ‚Ç±${data.allowance}\nPayout: ‚Ç±${data.payout}\nTotal: ‚Ç±${data.allowance + data.payout}`;
    const url = `https://wa.me/${data.phone}?text=${encodeURIComponent(message)}`;
    window.open(url, '_blank');
  }

  function sendEmail() {
    const data = DATA[currentUser];
    const subject = `RAD Payslip ‚Äì ${currentUser}`;
    const body = `Hi ${currentUser},\n\nHere's your payslip summary:\n- Attendance: ${data.attendance}/20\n- Deliveries: ${data.deliveries}\n- Allowance: ‚Ç±${data.allowance}\n- Payout: ‚Ç±${data.payout}\n\nTotal: ‚Ç±${data.allowance + data.payout}`;
    window.location.href = `mailto:${data.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  }
</script>

</body>
</html>
