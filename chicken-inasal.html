<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chicken Inasal - Order Page</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    .product { margin-bottom: 16px; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
    .qty-controls { display: flex; align-items: center; gap: 10px; margin-top: 8px; }
    .qty-controls button { padding: 4px 10px; font-size: 16px; cursor: pointer; }
    .qty-controls input { width: 40px; text-align: center; }
    #cart-summary { margin-top: 20px; border-top: 1px solid #000; padding-top: 10px; }
    textarea { width: 100%; height: 120px; margin-top: 10px; }
  </style>
</head>
<body>

  <h1>Chicken Inasal Order Form</h1>

  <div class="product">
    <h3>Chicken Inasal (Pecho)</h3>
    <p>‚Ç±129.00</p>
    <div class="qty-controls">
      <button class="qty-minus" data-item="Chicken Inasal (Pecho)">‚ûñ</button>
      <input type="number" min="0" value="0" readonly id="qty-Chicken Inasal (Pecho)">
      <button class="qty-plus" data-item="Chicken Inasal (Pecho)">‚ûï</button>
    </div>
  </div>

  <div class="product">
    <h3>Chicken Inasal (Paa)</h3>
    <p>‚Ç±119.00</p>
    <div class="qty-controls">
      <button class="qty-minus" data-item="Chicken Inasal (Paa)">‚ûñ</button>
      <input type="number" min="0" value="0" readonly id="qty-Chicken Inasal (Paa)">
      <button class="qty-plus" data-item="Chicken Inasal (Paa)">‚ûï</button>
    </div>
  </div>

  <div class="product">
    <h3>Garlic Rice</h3>
    <p>‚Ç±25.00</p>
    <div class="qty-controls">
      <button class="qty-minus" data-item="Garlic Rice">‚ûñ</button>
      <input type="number" min="0" value="0" readonly id="qty-Garlic Rice">
      <button class="qty-plus" data-item="Garlic Rice">‚ûï</button>
    </div>
  </div>

  <div class="product">
    <h3>Bottled Water</h3>
    <p>‚Ç±20.00</p>
    <div class="qty-controls">
      <button class="qty-minus" data-item="Bottled Water">‚ûñ</button>
      <input type="number" min="0" value="0" readonly id="qty-Bottled Water">
      <button class="qty-plus" data-item="Bottled Water">‚ûï</button>
    </div>
  </div>

  <hr>

  <h3>Customer Information</h3>
  <input type="text" id="customer-name" placeholder="Your Name" required><br>
  <input type="email" id="customer-email" placeholder="Email"><br>
  <input type="tel" id="customer-phone" placeholder="WhatsApp Number" required><br>

  <h3>Delivery Details</h3>
  <input type="date" id="delivery-date"><br>
  <input type="time" id="delivery-time"><br>

  <h3>Special Instructions</h3>
  <textarea id="customization-notes" placeholder="e.g. No chili, extra rice..."></textarea>

  <h3>Cart Summary</h3>
  <div id="cart-summary"></div>
  <textarea id="order-summary" readonly></textarea><br>

  <button id="checkout-btn">Checkout</button>
  <button onclick="copySummary()">Copy Summary</button>

  <script>
    const cart = {};
    const serviceFee = 29.99;
    const prices = {
      "Chicken Inasal (Pecho)": 129,
      "Chicken Inasal (Paa)": 119,
      "Garlic Rice": 25,
      "Bottled Water": 20
    };

    function updateCart() {
      const cartContainer = document.getElementById("cart-summary");
      cartContainer.innerHTML = "";

      let subtotal = 0;
      for (const item in cart) {
        const { qty, price } = cart[item];
        if (qty > 0) {
          subtotal += qty * price;
          cartContainer.innerHTML += `<div>${item} √ó ${qty} ‚Äì ‚Ç±${qty * price}</div>`;
        }
      }

      if (subtotal > 0) {
        cartContainer.innerHTML += `<div>Service Fee ‚Äì ‚Ç±${serviceFee.toFixed(2)}</div>`;
      }

      const total = subtotal > 0 ? subtotal + serviceFee : 0;
      cartContainer.innerHTML += `<strong>Total: ‚Ç±${total.toFixed(2)}</strong>`;

      generateSummary(subtotal, total);
    }

    function adjustQty(item, delta) {
      if (!cart[item]) cart[item] = { qty: 0, price: prices[item] };
      cart[item].qty = Math.max(0, cart[item].qty + delta);
      document.getElementById(`qty-${item}`).value = cart[item].qty;
      updateCart();
    }

    document.querySelectorAll(".qty-plus").forEach(btn => btn.onclick = () => adjustQty(btn.dataset.item, 1));
    document.querySelectorAll(".qty-minus").forEach(btn => btn.onclick = () => adjustQty(btn.dataset.item, -1));

    function generateSummary(subtotal, finalTotal) {
      const customerName = document.getElementById("customer-name").value;
      const customerEmail = document.getElementById("customer-email").value;
      const customerPhone = document.getElementById("customer-phone").value;
      const deliveryDate = document.getElementById("delivery-date").value;
      let deliveryTime = document.getElementById("delivery-time").value;
      const customizationNotes = document.getElementById("customization-notes").value;

      if (!deliveryTime && deliveryDate === new Date().toISOString().split('T')[0]) {
        const now = new Date();
        now.setMinutes(now.getMinutes() + 80);
        deliveryTime = now.toTimeString().slice(0,5);
        document.getElementById("delivery-time").value = deliveryTime;
      }

      const merchantName = "Chicken Inasal";
      const summaryText = [
        `Merchant: ${merchantName}`,
        `üôã Name: ${customerName}`,
        `üìß Email: ${customerEmail}`,
        `üì± WhatsApp: ${customerPhone}`,
        ...Object.entries(cart).filter(([_, d]) => d.qty > 0).map(([item, d]) => `${item} √ó ${d.qty} ‚Äì ‚Ç±${d.qty * d.price}`),
        ...(subtotal > 0 ? [`Service & Delivery Fee ‚Äì ‚Ç±${serviceFee.toFixed(2)}`] : []),
        `Total: ‚Ç±${finalTotal.toFixed(2)}`,
        deliveryDate ? `üìÖ Delivery Date: ${deliveryDate}` : '',
        deliveryTime ? `‚è∞ Delivery Time: ${deliveryTime}` : '',
        customizationNotes ? `üìù Special Instructions: ${customizationNotes}` : ''
      ].filter(Boolean).join("\n");

      document.getElementById("order-summary").value = summaryText;

      const merchantNumber = "63XXXXXXXXXX";
      const adminNumber = "63YYYYYYYYYY";

      const waMerchant = `https://wa.me/${merchantNumber}?text=${encodeURIComponent("Hello! New order from " + merchantName + ":\n" + summaryText)}`;
      const waAdmin = `https://wa.me/${adminNumber}?text=${encodeURIComponent("Admin copy - Order from " + merchantName + ":\n" + summaryText)}`;

      const filloutURL = `https://forms.fillout.com/t/oMZACWUnvFus` +
        `?customerName=${encodeURIComponent(customerName)}` +
        `&customerEmail=${encodeURIComponent(customerEmail)}` +
        `&whatsappNumber=${encodeURIComponent(customerPhone)}` +
        `&deliveryDate=${encodeURIComponent(deliveryDate)}` +
        `&deliveryTime=${encodeURIComponent(deliveryTime)}` +
        `&customizationNotes=${encodeURIComponent(customizationNotes)}` +
        `&cartSummary=${encodeURIComponent(summaryText)}`;

      document.getElementById("checkout-btn").onclick = () => {
        if (!customerName || !customerPhone) {
          alert("‚ùó Please enter your name and WhatsApp number.");
          return;
        }
        window.open(filloutURL, '_blank');
        window.open(waMerchant, '_blank');
        window.open(waAdmin, '_blank');
      };
    }

    function copySummary() {
      const textarea = document.getElementById("order-summary");
      textarea.select();
      document.execCommand("copy");
      alert("‚úîÔ∏è Nakopya na ang imo order! I-paste ini sa Fillout Form.");
    }
  </script>

</body>
</html>
