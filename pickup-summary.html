<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pickup Request Summary | DalaKoNa</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fff9e6;
      padding: 2rem;
      color: #333;
    }
    .summary-container {
      max-width: 600px;
      margin: auto;
      background: white;
      border-radius: 16px;
      border: 2px solid #008060;
      padding: 2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    h2 {
      font-family: 'Cinzel', serif;
      color: #008060;
      text-align: center;
    }
    .summary-details p {
      margin: 0.3rem 0;
    }
    .countdown {
      color: red;
      font-weight: bold;
      margin: 1rem 0;
    }
    .button-row {
      text-align: center;
      margin-top: 1.5rem;
    }
    .cancel-btn {
      background: red;
      color: white;
      padding: 0.6rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    .confirm-code {
      background: #d1f7cc;
      padding: 1rem;
      border-radius: 12px;
      margin-top: 1rem;
      text-align: center;
      font-weight: bold;
      font-size: 1.1rem;
    }
    .terms {
      font-size: 0.85rem;
      margin-top: 2rem;
      color: #555;
    }
  </style>
</head>
<body>

  <div class="summary-container">
    <h2>üßæ Pickup Summary</h2>

    <div class="summary-details">
      <p><strong>From:</strong> <span id="sumFrom">Handumanan</span></p>
      <p><strong>To:</strong> <span id="sumTo">Alijis</span></p>
      <p><strong>Pickup Location:</strong> <span id="sumPickup">Felisa Market</span></p>
      <p><strong>Pickup Address:</strong> <span id="sumPickupAddr">Gate 2, Brgy. Felisa</span></p>
      <p><strong>Delivery Address:</strong> <span id="sumDeliveryAddr">Across Alijis Gym</span></p>
      <p><strong>Pickup Date:</strong> <span id="sumPickupDate">2025-06-24</span></p>
      <p><strong>Item:</strong> <span id="sumItem">Documents</span></p>
      <p><strong>Estimated Fee:</strong> ‚Ç±<span id="sumFee">78.00</span></p>
      <hr />
      <p><strong>Customer Name:</strong> <span id="sumCustomerName">Juan Dela Cruz</span></p>
      <p><strong>Customer Contact:</strong> <span id="sumCustomerContact">09123456789</span></p>
      <p><strong>Receiver Name:</strong> <span id="sumReceiverName">Ana Santos</span></p>
      <p><strong>Receiver Contact:</strong> <span id="sumReceiverContact">09998887777</span></p>
    </div>

    <div class="countdown" id="countdown">‚è± Auto-confirming in 2:00</div>

    <div class="button-row">
      <button class="cancel-btn" id="cancelBtn" onclick="cancelRequest()">‚ùå Cancel Request</button>
    </div>

    <div class="confirm-code" id="confirmBox" style="display:none;">
      ‚úÖ Request Confirmed!<br/>
      Confirmation Code: <span id="confirmCode">DLK12345</span>
    </div>

    <div class="terms">
      üìå <strong>Terms & Conditions:</strong><br/>
      - COD (Cash on Delivery) must be exact change. No change provided.<br/>
      - If cancelled within 2 minutes, no charges will apply.<br/>
      - After confirmation, cancellation is no longer allowed.<br/>
      - For bank transfers, send proof to our official DalaKoNa WhatsApp.
    </div>
  </div>

  <script>
    let timeLeft = 120;
    const countdownEl = document.getElementById("countdown");
    const confirmBox = document.getElementById("confirmBox");
    const cancelBtn = document.getElementById("cancelBtn");
    const confirmCode = "DLK" + Math.floor(10000 + Math.random() * 89999);

    const countdown = setInterval(() => {
      if (timeLeft <= 0) {
        clearInterval(countdown);
        cancelBtn.disabled = true;
        cancelBtn.style.opacity = 0.5;
        countdownEl.textContent = "‚úÖ Request confirmed!";
        document.getElementById("confirmBox").style.display = "block";
        document.getElementById("confirmCode").textContent = confirmCode;
        sendWhatsAppConfirmation();
      } else {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        countdownEl.textContent = `‚è± Auto-confirming in ${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
        timeLeft--;
      }
    }, 1000);

    function cancelRequest() {
      clearInterval(countdown);
      countdownEl.textContent = "‚ùå Request Cancelled.";
      cancelBtn.disabled = true;
      cancelBtn.style.opacity = 0.5;
      confirmBox.style.display = "none";
    }

    function sendWhatsAppConfirmation() {
      const message = `üì¶ New Pickup Request Confirmed\n\nPickup: Felisa Market\nDrop-off: Alijis\nItem: Documents\nFee: ‚Ç±78.00\nCustomer: Juan Dela Cruz\nContact: 09123456789\nConfirmation Code: ${confirmCode}`;
      const phone = "63XXXXXXXXXX"; // Admin/rider number
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, "_blank");
    }
  </script>

</body>
</html>
