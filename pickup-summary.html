<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pickup Summary ‚Äì DalaKoNa</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet"/>
  <style>
    body {
      background: #fff9e6;
      font-family: 'Inter', sans-serif;
      padding: 2rem 1rem;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      border: 2px solid #008060;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    h1 {
      font-family: 'Cinzel', serif;
      color: #008060;
      text-align: center;
      margin-bottom: 1rem;
    }
    .summary p {
      margin: 0.5rem 0;
    }
    .btn {
      background: #008060;
      color: white;
      padding: 0.8rem;
      margin-top: 1.5rem;
      text-align: center;
      border: none;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
    }
    .cancel-btn {
      background: #cc0000;
      margin-top: 1rem;
    }
    .notice {
      margin-top: 1rem;
      font-size: 0.95rem;
      color: #555;
    }
    .timer {
      font-weight: bold;
      color: #cc0000;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üßæ Pickup Summary</h1>
    <div class="summary">
      <p><strong>From:</strong> <span id="fromArea">-</span></p>
      <p><strong>To:</strong> <span id="toArea">-</span></p>
      <p><strong>Fee:</strong> ‚Ç±<span id="fee">-</span></p>
      <p><strong>Payment Method:</strong> <span id="method">-</span></p>
      <p><strong>Reference No:</strong> <span id="ref">-</span></p>
      <p><strong>Confirmation in:</strong> <span class="timer" id="countdown">2:00</span></p>
    </div>

    <button class="btn" id="confirmBtn" disabled>‚úÖ Confirm via WhatsApp</button>
    <button class="btn cancel-btn" onclick="cancelOrder()">‚ùå Cancel Order</button>

    <div class="notice">
      <p>Note: You have 2 minutes to cancel this order before it auto-confirms and sends to the DalaKoNa team.</p>
      <p>By continuing, you agree to our delivery terms. Make sure all details are accurate.</p>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const from = urlParams.get('from');
    const to = urlParams.get('to');
    const fee = urlParams.get('fee');
    const method = urlParams.get('method');
    const ref = urlParams.get('ref') || '-';

    document.getElementById('fromArea').innerText = from;
    document.getElementById('toArea').innerText = to;
    document.getElementById('fee').innerText = fee;
    document.getElementById('method').innerText = method;
    document.getElementById('ref').innerText = ref;

    let secondsLeft = 120;
    const countdownEl = document.getElementById('countdown');
    const confirmBtn = document.getElementById('confirmBtn');

    const countdown = setInterval(() => {
      secondsLeft--;
      const min = Math.floor(secondsLeft / 60);
      const sec = secondsLeft % 60;
      countdownEl.innerText = `${min}:${sec < 10 ? '0' + sec : sec}`;
      
      if (secondsLeft <= 0) {
        clearInterval(countdown);
        confirmBtn.disabled = false;
        autoSendToWhatsApp();
      }
    }, 1000);

    function cancelOrder() {
      clearInterval(countdown);
      alert("Your pickup request has been cancelled.");
      window.location.href = "index.html";
    }

    function autoSendToWhatsApp() {
      const message = `DalaKoNa Pickup Summary:%0AFrom: ${from}%0ATo: ${to}%0AFee: ‚Ç±${fee}%0APayment: ${method}%0ARef: ${ref}`;
      const phone = '63XXXXXXXXXX';
      const waUrl = `https://wa.me/${phone}?text=${message}`;
      window.location.href = waUrl;
    }
  </script>
</body>
</html>
