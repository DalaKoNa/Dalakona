<!-- pickup-summary.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pickup Summary ‚Äì DalaKoNa</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body { font-family: 'Inter', sans-serif; background: #fff9e6; padding: 2rem; text-align: center; }
    .summary-box { background: white; border: 2px solid #008060; border-radius: 16px; padding: 2rem; max-width: 480px; margin: auto; }
    .summary-box h2 { color: #008060; font-family: 'Cinzel', serif; }
    .summary-box p { text-align: left; }
    .button { margin-top: 1rem; padding: 0.6rem 1.2rem; border: none; border-radius: 8px; background: #008060; color: white; cursor: pointer; }
    .cancelled { color: red; font-weight: bold; }
    .terms { font-size: 0.9rem; color: #555; margin-top: 1rem; text-align: left; }
  </style>
</head>
<body>
  <div class="summary-box">
    <h2>üßæ Pickup Request Summary</h2>
    <p><strong>Confirmation No.:</strong> <span id="confirmation">DLN-25423</span></p>
    <p><strong>Pickup:</strong> 7-Eleven Handumanan</p>
    <p><strong>Pickup Address:</strong> Gate 1, Felisa Road</p>
    <p><strong>Delivery:</strong> Zone 5, Brgy. Alijis</p>
    <p><strong>Item:</strong> McDo Family Set</p>
    <p><strong>Pickup Date:</strong> June 24, 2025</p>
    <p><strong>Payment:</strong> COD (To be collected)</p>
    <p><strong>Auto-assigned Pickup Time:</strong> ~2:45 PM</p>
    <p><strong>Estimated Delivery Time:</strong> 1 hr 10 mins</p>
    <p><strong>Fee:</strong> ‚Ç±78.00</p>

    <p id="countdown">‚è≥ Sending confirmation in 2:00...</p>
    <button class="button" onclick="cancelRequest()" id="cancelBtn">‚ùå Cancel Request</button>
    <p id="cancelMessage" class="cancelled" style="display: none;">Request has been cancelled.</p>
  </div>

  <div class="terms">
    <h4>üìå Terms & Conditions for COD</h4>
    <ul>
      <li>Customer must be available at the delivery location.</li>
      <li>Exact payment must be prepared upon delivery.</li>
      <li>Non-payment may result in account suspension.</li>
    </ul>
  </div>

  <script>
    let timer = 120;
    let countdown = document.getElementById("countdown");
    let cancelBtn = document.getElementById("cancelBtn");
    let cancelMessage = document.getElementById("cancelMessage");

    const adminNumber = "63XXXXXXXXXX";
    const riderNumber = "63YYYYYYYYYY";
    const summaryText = encodeURIComponent(`
üßæ DalaKoNa Pickup Request

‚úÖ CONFIRMATION #DLN-25423
üïë Auto-assigned pickup time: ~2:45 PM
üìç From: Handumanan
üìç Pickup Address: Gate 1, Felisa Road
üìç To: Alijis
üìç Delivery Address: Zone 5, Brgy. Alijis
üì¶ Item: McDo Family Set
üí∏ Payment Method: COD
üìÖ Pickup Date: June 24, 2025
üí∞ Fee: ‚Ç±78.00
‚è≥ ETA: 1 hr 10 mins
    `);

    function cancelRequest() {
      clearInterval(countdownInterval);
      cancelMessage.style.display = "block";
      countdown.textContent = "‚ùå Request cancelled.";
      cancelBtn.disabled = true;
    }

    const countdownInterval = setInterval(() => {
      if (timer > 0) {
        timer--;
        let mins = Math.floor(timer / 60);
        let secs = timer % 60;
        countdown.textContent = `‚è≥ Sending confirmation in ${mins}:${secs.toString().padStart(2, "0")}...`;
      } else {
        clearInterval(countdownInterval);
        if (!cancelBtn.disabled) {
          countdown.textContent = "‚úÖ Confirmation sent to Admin and Rider.";
          window.open(`https://wa.me/${adminNumber}?text=${summaryText}`, "_blank");
          setTimeout(() => {
            window.open(`https://wa.me/${riderNumber}?text=${summaryText}`, "_blank");
          }, 1500);
          cancelBtn.disabled = true;
        }
      }
    }, 1000);
  </script>
</body>
</html>
