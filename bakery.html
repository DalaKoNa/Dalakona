<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bakery</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      max-width: 800px;
    }
    .product {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
    }
    .cart-summary {
      font-size: 0.9rem;
      background: #f9f9f9;
      padding: 10px;
      margin-top: 20px;
    }
    .input-group {
      margin: 10px 0;
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
    }
    button {
      padding: 8px 12px;
      margin-top: 5px;
    }
    .actions {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Bakery</h1>

  <div id="product-list">
    <div class="product">
      <span>Bread Loaf (₱80)</span>
      <button onclick="addToCart('Bread Loaf', 80)">Add to Cart</button>
    </div>
    <div class="product">
      <span>Ensaymada (₱45)</span>
      <button onclick="addToCart('Ensaymada', 45)">Add to Cart</button>
    </div>
    <div class="product">
      <span>Spanish Bread (₱40)</span>
      <button onclick="addToCart('Spanish Bread', 40)">Add to Cart</button>
    </div>
    <div class="product">
      <span>Pandesal (12 pcs) (₱60)</span>
      <button onclick="addToCart('Pandesal (12 pcs)', 60)">Add to Cart</button>
    </div>
    <div class="product">
      <span>Chocolate Chip Cookies (6 pcs) (₱120)</span>
      <button onclick="addToCart('Chocolate Chip Cookies (6 pcs)', 120)">Add to Cart</button>
    </div>
    <div class="product">
      <span>Banana Bread (₱95)</span>
      <button onclick="addToCart('Banana Bread', 95)">Add to Cart</button>
    </div>
  </div>

  <div class="cart-summary" id="cart-summary">
    <strong>Cart:</strong> Empty<br>
    <strong>Total:</strong> ₱0
  </div>

  <div class="input-group">
    <label>Customer Name</label>
    <input type="text" id="customerName" />
  </div>
  <div class="input-group">
    <label>Customer Email</label>
    <input type="email" id="customerEmail" />
  </div>
  <div class="input-group">
    <label>Customer Phone</label>
    <input type="tel" id="customerPhone" />
  </div>
  <div class="input-group">
    <label>WhatsApp Number</label>
    <input type="tel" id="whatsappNumber" />
  </div>
  <div class="input-group">
    <label>Delivery Date</label>
    <input type="date" id="deliveryDate" />
  </div>
  <div class="input-group">
    <label>Delivery Time</label>
    <input type="time" id="deliveryTime" />
  </div>
  <div class="input-group">
    <label>Customization / Special Instructions</label>
    <textarea id="customizationNotes"></textarea>
  </div>

  <div class="actions">
    <button onclick="openPrefilledForm()">Submit via Fillout</button>
    <button onclick="sendWhatsApp()">Send via WhatsApp</button>
  </div>

  <script>
    let cart = {};
    const serviceFee = 29.99;

    function addToCart(item, price) {
      if (!cart[item]) {
        cart[item] = { price: price, quantity: 1 };
      } else {
        cart[item].quantity += 1;
      }
      updateCartSummary();
    }

    function updateCartSummary() {
      const summaryEl = document.getElementById('cart-summary');
      let summary = '';
      let total = serviceFee;

      for (let item in cart) {
        const line = `${item} x${cart[item].quantity} - ₱${cart[item].price * cart[item].quantity}`;
        summary += line + '<br>';
        total += cart[item].price * cart[item].quantity;
      }

      if (summary === '') {
        summary = 'Empty<br>';
        total = 0;
      }

      summary += `<strong>Service Fee:</strong> ₱${serviceFee.toFixed(2)}<br>`;
      summary += `<strong>Total:</strong> ₱${total.toFixed(2)}`;
      summaryEl.innerHTML = `<strong>Cart:</strong><br>${summary}`;
    }

    function getCartText() {
      return Object.entries(cart).map(([item, data]) => `${item} x${data.quantity}`).join(', ');
    }

    function openPrefilledForm() {
      const base = "https://forms.fillout.com/t/oMZACWUnvFus";
      const params = new URLSearchParams({
        customerName: document.getElementById('customerName').value,
        customerEmail: document.getElementById('customerEmail').value,
        customerPhone: document.getElementById('customerPhone').value,
        whatsappNumber: document.getElementById('whatsappNumber').value,
        cartSummary: getCartText(),
        customizationNotes: document.getElementById('customizationNotes').value,
        deliveryDate: document.getElementById('deliveryDate').value,
        deliveryTime: document.getElementById('deliveryTime').value
      });
      window.open(`${base}?${params.toString()}`, '_blank');
    }

    function sendWhatsApp() {
      const phone = document.getElementById('whatsappNumber').value.replace(/\D/g, '');
      const message = `
*New Bakery Order*
Name: ${document.getElementById('customerName').value}
Email: ${document.getElementById('customerEmail').value}
Phone: ${document.getElementById('customerPhone').value}
Order: ${getCartText()}
Delivery: ${document.getElementById('deliveryDate').value} at ${document.getElementById('deliveryTime').value}
Notes: ${document.getElementById('customizationNotes').value}
      `.trim();

      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    }
  </script>

</body>
</html>
